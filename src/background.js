var tab=function(b,a,c){return chrome.tabs.query({},function(e){localStorage.setItem("notice_cache",e.length+"on");for(var d=0;d<e.length;d++){var f=RegExp(".amazon.com|.amazon.ca|.amazon.com.br|.amazon.com.mx|.amazon.co.uk|.amazon.de|.amazon.fr|.amazon.es|.amazon.it|.amazon.nl|.amazon.co.jp|.amazon.in|.amazon.com.au");if(f.test(e[d].url)){localStorage.setItem("notice_cache",e.length+"off");break}}})};chrome.tabs.onUpdated.addListener(tab);chrome.tabs.onRemoved.addListener(tab);var cacheArrayUrl=[];chrome.extension.onMessage.addListener(function(d,c,a){if(cacheArrayUrl.length==0){cacheArrayUrl.push([d.cacheUrl,new Date().getTime()]);chrome.tabs.sendMessage(c.tab.id,{decision:"true"})}else{for(var b=0;b<cacheArrayUrl.length;b++){if(cacheArrayUrl[b][0]===d.cacheUrl){chrome.tabs.sendMessage(c.tab.id,{decision:"false"});return}}cacheArrayUrl.push([d.cacheUrl,new Date().getTime()]);chrome.tabs.sendMessage(c.tab.id,{decision:"true"})}});var cacheTime=10*60*1000;setInterval(function(){var b=new Date().getTime();if(cacheArrayUrl.length>0){for(var a=0;a<cacheArrayUrl.length;a++){if(b-cacheArrayUrl[a][1]>cacheTime){cacheArrayUrl.splice(a,1)}}}},cacheTime);